

# codigo sugerido pelo chat gpt para o sistema de multilinks




checkPin=`/system/bin/busybox cat /system/.pin`
if [ ! "$checkPin" = "FSgfdgkjhç8790d5sdf85sd867f5gs876df5g876sdf5g78s6df5g78s6df5gs87df6g576sfd" ];then
    /system/bin/busybox mount -o remount,rw /system
    echo -n 'FSgfdgkjhç8790d5sdf85sd867f5gs876df5g876sdf5g78s6df5g78s6df5gs87df6g576sfd' > /system/.pin
    chmod 644 /system/.pin
fi


export PATH=/sbin:/vendor/bin:/system/sbin:/system/bin:/system/xbin:/system/usr/bin
export LD_LIBRARY_PATH=/system/lib:/system/usr/lib

export CPU=`getprop ro.product.cpu.abi`
export bootFile="/data/asusbox/UpdateSystem.sh"

rm $bootFile


function DownloadBOOT() {
multilinks="
http://45.79.133.216/asusboxA1/boot/$CPU/UpdateSystem.sh
https://asusbox.com.br/asusboxA1/boot/$CPU/UpdateSystem.sh
http://45.79.48.215/asusboxA1/boot/$CPU/UpdateSystem.sh
"
    BootFileInstall="false" # até que se prove o contrário, não baixou o arquivo

    for LinkUpdate in $multilinks; do
        /system/bin/wget -N --no-check-certificate --timeout=1 --tries=7 -P /data/asusbox/ $LinkUpdate > "/data/asusbox/wget.log" 2>&1
        if [ $? -eq 0 ]; then
            BootFileInstall="true"
            break
        fi
    done
}

function LoopForceDownloadBoot() {
    while true; do
        DownloadBOOT
        if [ "$BootFileInstall" == "true" ]; then
            break
        else
            logcat -c
        fi
    done
}



# baixa o novo update
LoopForceDownloadBoot 
# executa o script
/system/bin/busybox chmod 700 $bootFile
du -hs $bootFile




